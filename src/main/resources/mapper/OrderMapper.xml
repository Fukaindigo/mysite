<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.site.dao.OrderDao">

	<!-- add order -->
	<insert id="saveOrder" useGeneratedKeys="true"
		keyProperty="orderId" keyColumn="orderId"
		parameterType="com.site.enitity.SiteOrder">
		insert into
		siteOrder (
		userId,
		itemCode,
		itemPrice,
		itemNum,
		itemAmount,
		itemTax,
		status,
		regDate
		)values(
		#{userId},
		#{itemCode},
		#{itemPrice},
		#{itemNum},
		#{itemAmount},
		#{itemTax},
		#{status},
		CURRENT_TIMESTAMP()
		)
	</insert>


	<!-- update stock -->
	<update id="updateItem" parameterType="java.util.HashMap">
	UPDATE siteItem SET itemNum=itemNum-#{num},updDate=CURRENT_TIMESTAMP() WHERE itemCode = #{id}
	</update>
</mapper>